{% extends "new/new_base.html" %} {% load static %}


<!-- Required meta tags -->
<!-- <meta charset="utf-8"> -->
<!-- <meta name="viewport" content="width=device-width, initial-scale=1"> -->
{% block content_head %}




<link rel="preconnect" href="https://fonts.gstatic.com">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.0/font/bootstrap-icons.css">

<link rel="stylesheet" href="/resources/demos/style.css">

<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&display=swap" rel="stylesheet">
<!-- Bootstrap CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick-theme.min.css" integrity="sha512-17EgCFERpgZKcm0j0fEq1YCJuyAWdz9KUtv1EjVuaOz8pDnh/0nZxmU6BBXwaaxqoi9PQXnRWqlcDB027hgv9A==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick.min.css" integrity="sha512-yHknP1/AwR+yx26cB1y0cjvQUMvEa2PFzt1c9LlS4pRQ5NOTZFWbhBig+X9G9eYW/8m0/4OXNx8pxJ6z57x0dw==" crossorigin="anonymous" />
<link rel="stylesheet" href="{% static  'new_css/teach/new_project_list.css' %}">
<link rel="stylesheet" href="{% static  'new_css/teach/dialog.css' %}">

<script src="{% static 'js/blogs/index.js' %}"></script>
<script>
    sessionStorage.removeItem('pk')
</script>




{% endblock %} {% block content %}


<!-- <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
  <link rel="stylesheet" href="/resources/demos/style.css">
  <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script> -->



<script>
    var project_titles_ongoing = [] 
    {%if ongoing_projects %} 
    {%for project in ongoing_projects %}
    var project_titles_add = {}
    project_titles_add['title'] = "{{project.title}}";
    project_titles_add['slug'] = "{{project.slug}}";
    project_titles_add['pk'] = "{{project.pk}}";
    project_titles_ongoing.push(project_titles_add) 
    {% endfor %} 
    {% endif %}

    function filterCompletedProjects(project) {

        var filter = document.getElementById('search_projects_ongoing').value
        if (filter) {
            if (project['title'].indexOf(filter) != -1) {
                return project;
            } else {
                return "";
            }
        }
    }
    document.getElementById('search_projects_ongoing').addEventListener('keyup', function() {

        document.getElementById('dropdown_ongoing').innerHTML = ""

        // document.getElementById('results').innerHTML = "results are " 
        var projects = project_titles_ongoing.filter(filterCompletedProjects)
        var dropdown_div = document.getElementById('dropdown_ongoing')
            //    document.getElementById('search_projects_ongoing').parentElement.parentElement.appendChild(dropdown_div)
        for (var i = 0; i < projects.length; i++) {
            // document.getElementById('results').innerHTML += "<a href='/teach/add/"+ projects[i]['pk'] +"'>"+ projects[i]['title'] +"</a>,"
            dropdown_div.innerHTML += "<a href='/teach/add/" + projects[i]['pk'] + "'>" + projects[i]['title'] + "</a><br>"
        }
    })
</script>
<script>
    var project_titles = [] 
    {%if completed_projects %} 
    {%for project in completed_projects %}
    var project_titles_add = {}
    project_titles_add['title'] = "{{project.title}}";
    project_titles_add['slug'] = "{{project.slug}}";
    project_titles.push(project_titles_add) 
    {% endfor %} 
    {% endif %}

    function filterOngoingProjects(project) {

        var filter = document.getElementById('search_projects_completed').value
        if (filter) {
            if (project['title'].indexOf(filter) != -1) {
                return project;
            } else {
                return "";
            }
        }
    }
    document.getElementById('search_projects_completed').addEventListener('keyup', function() {
        if (document.getElementById('search_projects_completed').value == "") {
            document.getElementById('dropdown_completed').innerHTML = ""
        }
        var projects = project_titles.filter(filterOngoingProjects)
        var dropdown_div = document.getElementById('dropdown_completed')
            //    for(var i=0; i<projects.length; i++){
            //        dropdown_div.innerHTML += "<a href='/"+ projects[i]['slug'] +"'>"+ projects[i]['title'] +"</a><br>"

        // }
    })
</script>






<div class="container flex-column align-items-center mt-4">
    <h1>Your Ongoing Projects</h1>
    <div style="z-index: 1;" id="search" class="input-group my-4">
        <input id="search_projects_ongoing" style="box-shadow: none;" type="text" class="form-control border-end-0" aria-describedby="button-addon2">
        <button class="btn btn-outline-warning border-start-0" type="button" id="button-addon2">Search</button>
    </div>
</div>
<div class="container mt-3">
    <div class="row slider">

        {% for project in ongoing_projects %}
        <div class="col-12">
            <div class="card">
                <img src="{{project.image}}" class="card-img-top" alt="..." onerror=this.src="/media/images/971.jpg">
                <div class="card-body pb-3 ">
                    <h5 class="card-title">{{project | title }}</h5>
                    <h6 class="card-text px-2 text-center">{{project.overview | slice:":40"}}</h6>

                    <ul class="list-group list-group-flush">
                        <li class="list-group-item"><strong>Author Name: </strong>{{ project.author.user.first_name }} {{project.author.user.last_name}}</li>
                        <li class="list-group-item"><strong>Level: </strong>{{project.difficulty_level | title}}</li>
                        <li class="list-group-item"><strong>Languages: </strong><span class="la">
                            {% for language in project.languages.all %}
                            <span class="la">{{language}}</span>{% endfor %}
                                </span></li>
                    </ul>
                </div>
                <hr>

                <div class="index-cta py-2 px-4 mx-1 ">
                    <div class="index-button reveiw">
                        <a style="color: white;" href="{% url 'project:project_review' project.slug %}" class="btn btn-warning py-1 px-2 ">REVIEW AND CREATE</a>
                    </div>
                    <div class="index-button gto1">
                        <a style="color: white;" href="{% url 'teach:add_course' project.pk %}" class="btn btn-warning py-1 px-2 ">EDIT BLOG</a>
                    </div>
                    <div class="index-button del12">
                        <a style="color: white;" data-href="{{project.pk}}" onclick="projecton('{{project.pk}}')" id="delete-project-button" class="btn btn-warning py-1 px-2 ">DELETE</a>
                    </div>

                    <!-- <div class="btn-group"> -->
                    <!-- <button id="drpdwn" style="background-color: transparent; box-shadow: none;" type="button" class="btn btn-light border-0 p-0" data-bs-toggle="dropdown" aria-expanded="false">
                                    <img style="color: #f9a80d; width: 1.2rem;" src="/media/share.svg" alt="">
                                </button> -->
                    <!-- <ul class="dropdown-menu dropend"> -->
                    <!-- <li><a class="dropdown-item" href="#"><i class="bi bi-twitter"></i> Twitter</a></li>
                                <li><a class="dropdown-item" href="#"><i class="bi bi-facebook"></i> Facebook</a></li>
                                <li><a class="dropdown-item" href="#"><i class="bi bi-linkedin"></i> Linkedin</a></li>
                                <li><a class="dropdown-item" href="#"><i class="bi bi-link-45deg"></i> Copy Link</a></li> -->
                    <!-- <li><a data-href="" href="https://www.facebook.com/sharer/sharer.php?app_id=&sdk=joey&display=popup&ref=plugin&src=share_button&u={{url}}" onclick="return !window.open(this.href, 'Facebook', 'width=640,height=580')" class="dropdown-item"><i class="bi bi-twitter"></i> Twitter</a></li>

                                <li><a data-href="" href="https://www.facebook.com/sharer/sharer.php?app_id=&sdk=joey&display=popup&ref=plugin&src=share_button&u={{url}}" onclick="return !window.open(this.href, 'Facebook', 'width=640,height=580')" class="dropdown-item"><i class="bi bi-facebook"></i> Facebook</a></li>

                                <li><a data-href="" class="dropdown-item" href="https://www.linkedin.com/shareArticle?mini=true&url={{url}}" onclick="return !window.open(this.href, 'LinkedIn', 'width=640,height=580')"><i class="bi bi-linkedin"></i> Linkedin</a></li>

                                <li><a href="#" onclick="{{function}};return false;" data-href="{{url}}" class="dropdown-item"><i class="bi bi-link-45deg"></i> Copy Link</a></li>
                            </ul> -->
                    <!-- </div> -->

                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
<div id="blue-btn">
    <button id="create_new_project_btn" type="button" onclick="projectoncr()" class="btn btn-outline-primary py-1">CREATE NEW PROJECT</button>
</div>
<div class="container flex-column align-items-center">
    <h1 id="completed_projects_heading" >Your Completed Projects</h1>
    <div style="z-index: 1;" id="search" class="input-group my-4">
        <input id="search_projects_completed" style="box-shadow: none;" type="text" class="form-control border-end-0" aria-describedby="button-addon2">
        <button class="btn btn-outline-warning border-start-0" type="button" id="button-addon2">Search</button>
    </div>
</div>
<div style="z-index: 3;" id="projectcreate">
    <div class="dlt-heading">
        <p>Are you absolutely sure?</p>
        <p class="dlt-heading-close"><i onclick="projectoffcr()" class="bi bi-x"></i></p>
    </div>
    <div class="dlt-warning">
        <p>On continuing, your project will be created.
            On continuing, you agree to <a href="{% url 'terms_for_creators' %}" target="_blank">KnowInDeep's Terms of Creators</a>.
        </p>
    </div>
    <div class="dlt-btn">
        <button onclick="location.href='{% url 'teach:add_course' %}';">CREATE </button>
    </div>
</div>

<div style="z-index: 2;" id="projectoverlay2" onclick="projectoffcr()"></div>

<div class="container mt-3">
    <div class="row slider">
        {% for project in completed_projects %}
        <div class="col-12">
            <div class="card">
                <img src="{{project.image}}" class="  card-img-top" alt="..." onerror=this.src="/media/images/971.jpg">
                <div class="card-body pb-3 ">
                    <h5 class="card-title">{{project | title }}</h5>
                    <h6 class="card-text px-2 text-center">{{project.overview | slice:":40"}}</h6>

                    <ul class="list-group list-group-flush">
                        <li class="list-group-item"><strong>Author Name: </strong>{{ project.author.user.first_name }} {{project.author.user.last_name}}</li>
                        <li class="list-group-item"><strong>Level: </strong>{{project.difficulty_level | title}}</li>
                        <li class="list-group-item"><strong>Languages: </strong><span class="la">
                            {% for language in project.languages.all %}
                        {{language}}{% endfor %}
                                </span></li>
                    </ul>
                </div>
                <hr>
                <div style="padding: 1rem;">
                    <div style="text-align: center;color: #008800;">Approved<i class="fa fa-check" aria-hidden="true"></i></div>
                <!--         
                    <div style="
                    text-align: center;
                    color: #ca0909;
                ">Approval Pending</div> -->
                </div>
                <hr>
                <div class="index-cta py-2 px-4 mx-1 ">
                    <div class="index-button"style="display: inline;">
                        <a style="color: white;" href="{% url 'project:sub_topic' project.slug %}" class="btn btn-warning py-1 px-2 ">GO TO BLOG</a>
                    </div>
                    {% if not project.isApproved %} 
                    <div class="index-button"style="float: right;display: inline; width 50%">
                        <a style="color: white; width: 100%;" href="{% url 'teach:add_course' project.pk %}" class="btn btn-warning py-1 px-2 ">EDIT</a>
                    </div>
                    

                    <!-- The code for when the project is approved will go here -->

                    {% else %}
                    <!-- The code for when the project is not approved will go here -->
                    {% endif %}
                    <div class="btn-group">
                        <button style="background-color: transparent; box-shadow: none;" type="button" class="btn btn-light border-0 p-0" data-bs-toggle="dropdown" aria-expanded="false">
                                    <img style="color: #f9a80d; width: 1.2rem;" src="/media/share.svg" alt="">
                                </button>
                        <ul class="dropdown-menu dropend">

                            <li><a data-href="" href="https://www.facebook.com/sharer/sharer.php?app_id=&sdk=joey&display=popup&ref=plugin&src=share_button&u={{project.getCompleteUrl}}" onclick="return !window.open(this.href, 'Facebook', 'width=640,height=580')"
                                    class="dropdown-item"><i class="bi bi-twitter"></i> Twitter</a></li>

                            <li><a data-href="" href="https://www.facebook.com/sharer/sharer.php?app_id=&sdk=joey&display=popup&ref=plugin&src=share_button&u={{project.getCompleteUrl}}" onclick="return !window.open(this.href, 'Facebook', 'width=640,height=580')"
                                    class="dropdown-item"><i class="bi bi-facebook"></i> Facebook</a></li>

                            <li><a data-href="" class="dropdown-item" href="https://www.linkedin.com/shareArticle?mini=true&url={{project.getCompleteUrl}}" onclick="return !window.open(this.href, 'LinkedIn', 'width=640,height=580')"><i class="bi bi-linkedin"></i> Linkedin</a></li>

                            <li><a href="#" onclick="copyProjectPageURLToClipBoard(this);return false;" data-href="{{project.getCompleteUrl}}" class="dropdown-item"><i class="bi bi-link-45deg"></i> Copy Link</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        {%endfor%}
    </div>
</div>
<div style="margin-bottom: -15%;" id="blue-btn">
    <!-- <button type="button" onclick="location.href='{% url 'teach:add_course' %}';" class="btn btn-outline-primary py-1 mb-5">CREATE NEW PROJECT</button> -->
</div>
<br><br>

<div style="z-index: 3;" id="projectdelete">
    <div class="dlt-heading">
        <p>Are you absolutely sure?</p>
        <p class="dlt-heading-close"><i onclick="projectoff()" class="bi bi-x"></i></p>
    </div>
    <div class="dlt-warning">
        <p>On continuing, your project will be permanently deleted and the data will be lost forever. There is no going back.</p>
    </div>
    <div class="dlt-btn">
        <button onclick="deleteProject()">I understand the consequences, delete this account</button>
    </div>
</div>

<div style="z-index: 2;" id="projectoverlay" onclick="projectoff()"></div>
<script>

    function deleteProject() {
        let pk = document.getElementById("projectdelete").getAttribute("delete-project-id")
        window.location.href = '{% url 'teach:delete_ongoing_project' 0 %}'.replace(/0/, pk);
    }

    function projecton(pk) {
        document.getElementById("projectdelete").setAttribute("delete-project-id", pk);
        document.getElementById("projectoverlay").style.display = "block";
        document.getElementById("projectdelete").style.display = "block";
        document.documentElement.scrollTop = 0;
        document.body.scrollTop = 0;
        document.body.style.overflow = "hidden";
    }

    function projectoff() {
        document.getElementById("projectoverlay").style.display = "none";
        document.getElementById("projectdelete").style.display = "none";
        document.body.style.overflow = "scroll";

    }
    function projectoncr() {
        document.getElementById("projectoverlay2").style.display = "block";
        document.getElementById("projectcreate").style.display = "block";
        // document.documentElement.scrollTop = 0;
        // document.body.scrollTop = 0;
        // document.body.style.overflow = "hidden";
    }

    function projectoffcr() {
        document.getElementById("projectoverlay2").style.display = "none";
        document.getElementById("projectcreate").style.display = "none";
        document.body.style.overflow = "scroll";

    }

    // document.getElementById("delete-project-button").onclick = function(e) {
    //     projecton();
    //     let pk = document.getElementById("delete-project-button").getAttribute("data-href");
    // }
</script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick.min.js" integrity="sha512-XtmMtDEcNz2j7ekrtHvOVR4iwwaD6o/FUJe6+Zq+HgcCsk3kj4uSQQR8weQ2QVj1o0Pk6PwYLohm206ZzNfubg==" crossorigin="anonymous"></script>

<script>
    // $(document).ready(function() {
    $(document).ready(function() {
        $("#drpdwn").click(function() {
            $(".dropdown-menu").toggleClass("show");
        });
    });
    $('.slider').slick({
     
        infinite: false,
        speed: 300,
        slidesToShow: 3,
        slidesToScroll: 3,
        dots: false,
        responsive: [{
            breakpoint: 1024,
            settings: {
                slidesToShow: 2,
                slidesToScroll: 2,
                infinite: false,
                dots: false
            }
        }, {
            breakpoint: 600,
            settings: {
                slidesToShow: 1,
                slidesToScroll: 1
            }
        }, {
            breakpoint: 480,
            settings: {
                slidesToShow: 1,
                slidesToScroll: 1
            }
        }]
    });


    var title = document.querySelectorAll('.card-title');
    Array.from(title).forEach(function(txt) {
        txt.textContent = `${txt.textContent.slice(0, 16)}`
    })

    var description = document.querySelectorAll('.card-text');
    Array.from(description).forEach(function(txt) {
        txt.textContent = `${txt.textContent.slice(0, 80)}`
    })

    var language = document.querySelectorAll('.lang');
    Array.from(language).forEach(function(txt) {
        txt.textContent = `${txt.textContent.slice(0, 10)}`
    })
</script>

<!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js" integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0" crossorigin="anonymous"></script> -->
<script>
    $(function() {
        $.widget("custom.catcomplete", $.ui.autocomplete, {
            _create: function() {
                this._super();
                this.widget().menu("option", "items", "> :not(.ui-autocomplete-category)");
            },
            _renderMenu: function(ul, items) {
                var that = this,
                    currentCategory = "";
                $.each(items, function(index, item) {
                    var li;
                    if (item.category != currentCategory) {
                        ul.append("<a href='https://www.google.com' class='ui-autocomplete-category'>" + item.category + "</a>");
                        currentCategory = item.category;
                    }
                    li = that._renderItemData(ul, item);
                    if (item.category) {
                        li.attr("aria-label", item.category + " : " + item.label);
                    }
                });
            }
        });
        //   var ongoingProjects = project_titles_ongoing.filter(filterCompletedProjects)
        //   alert(ongoingProjects)
        var ongoingData = [];
        var completedData = [];

        for (var i = 0; i < project_titles_ongoing.length; i++) {
            ongoingData.push({
                category: "",
                label: project_titles_ongoing[i]['title'],
                value: "/" + project_titles_ongoing[i]['slug']

            });

        }
        for (var i = 0; i < project_titles.length; i++) {
            completedData.push({
                category: "",
                label: project_titles[i]['title'],
                value: "/" + project_titles[i]['slug']
            });

        }

        //   var data = [
        //     { label: "anders", category: "" },
        //     { label: "andreas", category: "" },
        //     { label: "antal", category: "" },
        //     { label: "annhhx10", category: "Products" },
        //     { label: "annk K12", category: "Products" },
        //     { label: "annttop C13", category: "Products" },
        //     { label: "anders andersson", category: "People" },
        //     { label: "andreas andersson", category: "People" },
        //     { label: "andreas johnson", category: "People" }
        //   ];


        $("#search_projects_completed").catcomplete({
            delay: 0,
            source: completedData,
            select: function(event, ui) {
                window.location.href = ui.item.value;
            }
        });
        $("#search_projects_ongoing").catcomplete({
            delay: 0,
            source: ongoingData,
            select: function(event, ui) {
                window.location.href = ui.item.value;
            }
        });

    });
</script>


{% endblock %}