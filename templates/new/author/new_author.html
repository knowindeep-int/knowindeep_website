{% extends "new/new_base.html" %} {% load static %} {% block content_head %}
<!-- <script src="{% static 'js/author/author_page.js'%}"></script> -->
<link rel="stylesheet" href="{% static 'new_css/author/new_author.css' %}">


{% endblock %} 
{% block content %}
{%csrf_token%}
<script type="text/javascript">
    { % block jquery %
    }

    var is_verified = '{{is_verified}}'
    makeEditable(is_verified); 

    function disableEdit(is_verified) ;


   


    { % endblock jquery %
    }
    
   
</script>
<script>
         function updateProfile(field, value) {
        event.preventDefault();
        var dp = '{{ profile.dp }}'
        var first_name = '{{ profile.user.first_name }}'
        var last_name = '{{ profile.user.last_name }}'
        var description = '{{ profile.description }}'
        var email_id = '{{ profile.user.email }}'
        var phone_number = '{{ profile.phone_number }}'
        var linkedin_id = '{{ profile.linkedin_id }}'
        var twitter_id = '{{ profile.twitter_id }}'
        var github_id = '{{ profile.github_id }}'
        var isAuthor = '{{profile.isAuthor}}'
        var account_number = '{{ profile.isAuthor }}'
        var total_earnings = '{{ profile.total_earnings }}'
        var skills = '{{ profile.skills }}'

        let data = {
            'csrfmiddlewaretoken': $('input[name=csrfmiddlewaretoken]').val(),
            'username':'{{profile.user.username}}',
            'profile_id':'{{profile.pk}}',
            "description": description,
            "email_id": email_id,
            "phone_number": phone_number,
            "first_name": first_name,
            "linkedin_id": linkedin_id,
            "twitter_id": twitter_id,
            "github_id": github_id,
            "dp": dp,
            "skills": skills,
            "isAuthor": isAuthor,
            "account_number": account_number,
            "total_earnings": total_earnings,
            'last_name':last_name,
        }

        data[field] = value

        $.ajax({
            url: '{% url "api:update_profile" %}',
            method: "POST",
            data: data,
            dataType: 'json',
            success: function(data) {
                document.getElementById('name').innerHTML = data.username
                document.getElementById('desc').innerHTML = data.description
                document.getElementById('pho').innerHTML = data.phone_number
                document.getElementById('git').innerHTML = data.github_id
                document.getElementById('link').innerHTML = data.linkedin_id
                document.getElementById('twit').innerHTML = data.twitter_id
                document.getElementById('earn').innerHTML = data.total_earnings
                console.log('SUCCESS')
            },
            error: function(error) {
                console.log('error')
            },
            
        })
        reply(event)
    }

</script>
<div class="container profile-content">
    <div class="profile-left">
        <div class="profile-image">
            <img src="{{profile.dp.url}}"  alt="" onerror=this.src="">
            <button class="btn btn-light"><i class="bi bi-pencil"></i></button>
            <h1 id="name">{{profile.user.username}}</h1>
        </div>
        <div class="profile-details">
            <div class="profile-detail pb-0 pt-3">
                <div class="des pb-2">
                    <h5>Name</h5>
                    <p>{{profile.user.username}}</p>
                    <input style="outline: none;" class="p-1 rounded-3 border border-secondary" id="inp_name" type="text" placeholder="Enter Name" >
                </div>
                <div class="but">
                    <span class="btn-group second name1">
                    <button  type="button" class="btn btn-outline-success py-1 px-3 me-2 1" onclick="updateProfile('username',document.getElementById('inp_name').value)">Save</button>
                    <button id="butn1" type="button" class="btn btn-outline-danger py-1 px-2 1" onClick="reply(event)">Cancel</button>
                    </span>
                    <button id="1" onClick="reply_click(event)" type="button" class="btn btn-outline-secondary btn-show py-1 px-3 1" >Edit</button>
                </div>
            </div>
            <div class="profile-detail pb-0 pt-3">
                <div class="des pb-2">
                    <h5>Description</h5>
                    <p id="desc">{{profile.description}}</p>
                    <input style="outline: none;" class="p-1 rounded-3 border border-secondary" id="des-input" type="text" placeholder="Enter Description" >
                </div>
                <div class="but">
                    <span class="btn-group second name1">
                    <button  type="button" class="btn btn-outline-success py-1 px-3 me-2 2" onclick="updateProfile('description',document.getElementById('des-input').value)">Save</button>
                    <button id="butn2" type="button" class="btn btn-outline-danger py-1 px-2 2" onClick="reply(event)">Cancel</button>
                    </span>
                    <button id="2" onClick="reply_click(event)"  type="button" class="btn btn-outline-secondary btn-show py-1 px-3 2">Edit</button>
                </div>
            </div>
            <div class="profile-detail pb-0 pt-3 mb-4">
                <div class="des pb-2">
                    <h5>Phone Number</h5>
                    <p id="pho">{{profile.phone_number}}</p>
                    <input style="outline: none;" class="p-1 rounded-3 border border-secondary" id="ph-input" type="text" placeholder="Enter Phone Number" >
                </div>
                <div class="but">
                    <span class="btn-group second name1">
                    <button  type="button" class="btn btn-outline-success py-1 px-3 me-2 3" onclick="updateProfile('phone_number',document.getElementById('ph-input').value)">Save</button>
                    <button id="butn3" type="button" class="btn btn-outline-danger py-1 px-2 3" onClick="reply(event)">Cancel</button>
                    </span>
                    <button id="3" onClick="reply_click(event)"  type="button" class="btn btn-outline-secondary btn-show py-1 px-3 3">Edit</button>
                </div>
            </div>
        </div>
    </div>
    <div class="profile-right">
        <div class="profile-infos">
            <div class="profile-info pb-0 pt-0">
                <div class="desc pb-2">
                    <h5>Github Id</h5>
                    <p id="git">{{profile.github_id}}</p>
                    <input style="outline: none;" class="p-1 rounded-3 border border-secondary" id="git-input" type="text" placeholder="Enter Github Id" >
                </div>
                <div class="butt">
                    <span class="btn-group second name1">
                    <button  type="button" class="btn btn-outline-success py-1 px-3 me-2 4" onclick="updateProfile('github_id',document.getElementById('git-input').value)">Save</button>
                    <button id="butn4" type="button" class="btn btn-outline-danger py-1 px-2 4"  onClick="reply(event)">Cancel</button>
                    </span>
                    <button id="4" onClick="reply_click(event)"  type="button" class="btn btn-outline-secondary btn-show py-1 px-3 4">Edit</button>
                </div>
            </div>
            <div class="profile-info pb-0 pt-3">
                <div class="desc pb-2">
                    <h5>LinkedIn id</h5>
                    <p id="link">{{profile.linkedin_id}}</p>
                    <input style="outline: none;" class="p-1 rounded-3 border border-secondary" id="link-input" type="text" placeholder="Enter LinkedIn id" >
                </div>
                <div class="butt">
                    <span class="btn-group second name1">
                    <button  type="button" class="btn btn-outline-success py-1 px-3 me-2 5" onclick="updateProfile('linkedin_id',document.getElementById('link-input').value)">Save</button>
                    <button id="butn5" type="button" class="btn btn-outline-danger py-1 px-2 5" onClick="reply(event)">Cancel</button>
                    </span>
                    <button id="5" onClick="reply_click(event)" type="button" class="btn btn-outline-secondary btn-show py-1 px-3 5">Edit</button>
                </div>
            </div>
            <div class="profile-info pb-0 pt-4">
                <div class="desc pb-2">
                    <h5>Twitter id</h5>
                    <p id="twit">{{profile.twitter_id}}</p>
                    <input style="outline: none;" class="p-1 rounded-3 border border-secondary" id="twit-input" type="text" placeholder="Enter Twitter id" >
                </div>
                <div class="butt">
                    <span class="btn-group second name1">
                    <button  type="button" class="btn btn-outline-success py-1 px-3 me-2 6" onclick="updateProfile('twitter_id',document.getElementById('twit-input').value)">Save</button>
                    <button id="butn6" type="button" class="btn btn-outline-danger py-1 px-2 6"  onClick="reply(event)">Cancel</button>
                    </span>
                    <button id="6" onClick="reply_click(event)" type="button" class="btn btn-outline-secondary btn-show py-1 px-3 6">Edit</button>
                </div>
            </div>
            <div class="profile-info pb-0 pt-4">
                <div class="desc pb-2">
                    <h5>Total Earnings</h5>
                    <p id="earn">{{profile.total_earnings}}</p>
                    <input style="outline: none;" class="p-1 rounded-3 border border-secondary" id="earn-input" type="text" placeholder="Enter Total Earnings" >
                </div>
                <div class="butt">
                    <span class="btn-group second name1">
                    <button  type="button" class="btn btn-outline-success py-1 px-3 me-2 7" onclick="updateProfile('total_earnings',document.getElementById('earn-input').value)">Save</button>
                    <button id="butn7" type="button" class="btn btn-outline-danger py-1 px-2 7"  onClick="reply(event)">Cancel</button>
                    </span>
                    <button id="7" onClick="reply_click(event)" type="button" class="btn btn-outline-secondary btn-show py-1 px-3 7">Edit</button>
                </div>
            </div>
            <!-- <div class="profile-info pb-0 pt-4">
                <div class="desc pb-2">
                    <h5>NAME</h5>
                    <p>Priyansh Kedia</p>
                    <input style="outline: none;" class="p-1 rounded-3 border border-secondary" id="des-input" type="text" placeholder="Enter Name" >
                </div>
                <div class="butt"> -->
                    <!-- <button type="button" class="btn btn-outline-success py-1 px-3 me-2">Save</button>
                    <button type="button" class="btn btn-outline-danger py-1 px-2">Cancel</button> -->
                    <!-- <button type="button" class="btn btn-outline-secondary btn-show py-1 px-3">Edit</button>
                </div>
            </div>
            <div class="profile-info pb-0 pt-4">
                <div class="desc pb-2">
                    <h5>NAME</h5>
                    <p>Priyansh Kedia</p>
                    <input style="outline: none;" class="p-1 rounded-3 border border-secondary" id="des-input" type="text" placeholder="Enter Name" >
                </div>
                <div class="butt"> -->
                    <!-- <button type="button" class="btn btn-outline-success py-1 px-3 me-2">Save</button>
                    <button type="button" class="btn btn-outline-danger py-1 px-2">Cancel</button> -->
                    <!-- <button type="button" class="btn btn-outline-secondary btn-show py-1 px-3">Edit</button>
                </div>
            </div> -->
        </div>
    </div>
</div>


<script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
<script>

//    $(document).ready(function(){
//     for(var i=1;i<8;i++){
//         var b=i.toString();
//     $("#but-green."+b).hide();
//     $("#but-red."+b).hide();

//     $("#butt-green."+b).hide();
//     $("#butt-red."+b).hide();

//         $("#but-white."+b).click(function(){
//             $("#but-white."+b).hide();
//             $("#but-red."+b).show();
//             $("#but-green."+b).show();
//         });
//         $("#but-green."+b).click(function(){
//             $("#but-green."+b).hide();
//             $("#but-red."+b).hide();
//             $("#but-white."+b).show();
//         });
//         $("#but-red."+b).click(function(){
//             $("#but-red."+b).hide();
//             $("#but-green."+b).hide();
//             $("#but-white."+b).show();
//         });



//         $("#butt-white."+b).click(function(){
//             $("#butt-white."+b).hide();
//             $("#butt-red."+b).show();
//             $("#butt-green."+b).show();
//         });
//         $("#butt-green."+b).click(function(){
//             $("#butt-green."+b).hide();
//             $("#butt-red."+b).hide();
//             $("#butt-white."+b).show();
//         });
//         $("#butt-red."+b).click(function(){
//             $("#butt-red."+b).hide();
//             $("#butt-green."+b).hide();
//             $("#butt-white."+b).show();
//         });

//     }
 

//     });
function reply_click(e) {
e.target.classList.toggle("second");
var a=e.target.id;
var p1 = document.getElementsByClassName("btn-group");
var b= a-1;
p1[b].classList.toggle("second");
// var p2 = document.getElementsByClassName('inputss')
// p2[b].childNodes[0].disabled = false;
}

function reply(e) {
var txt = e.target.id;
var numb = txt.match(/\d/g);
var p1 = document.getElementsByClassName("btn-group");
p1[numb-1].classList.toggle("second");
// var p2 = document.getElementsByClassName('inputss')
// p2[numb-1].childNodes[0].disabled = true;
var b=String(numb);
p3=document.getElementById(b);
p3.classList.toggle("second");
}
</script>
{% endblock content %}