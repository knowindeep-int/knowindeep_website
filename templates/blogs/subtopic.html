{% extends "base.html" %} {% load static %} {% block content_head %}
<link rel="stylesheet" type="text/css" href="{% static 'blogs/css/blog_content.css' %}"> {% endblock %} {% block content %}

<div class="center">
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="{% url 'blogs:index' %}">Home</a></li>
        <li class="breadcrumb-item"><a href="{% url 'blogs:sub_topic' slug=chapter_heading  %}">{{ project.topic | title }}</a></li>
    </ol>
</div>
<div class="container" id="cont">

    <h2 id="blog_heading" class="center">
        {{ project.title }}
    </h2>

    <script>
        
        function copyCurrentPageURLToClipBoard(){
            var input = document.createElement("input")
            var url = document.location.href
            input.value = url
            document.body.appendChild(input)
            input.select();
            document.execCommand("copy")
            document.body.removeChild(input)
            toastr.options.timeOut = 200
            toastr.success('Copied To ClipBoard');
            var audio = new Audio('/media/copy.mp3');
            audio.play();

        }
        function copyChapterPageURL() {

            var input = document.createElement('input');
            input.value = document.getElementById("subtopic_chapter_copy").getAttribute('data-href');
            document.body.appendChild(input);
            input.select();
            document.execCommand("copy");
            document.body.removeChild(input);
            toastr.options.timeOut = 100
            toastr.success('Copied To ClipBoard');
            var audio = new Audio('/media/copy.mp3');
            audio.volume = 0.2;
            audio.play();

        }
        function getChapterAbsoluteUrl(project_slug,chapter_slug){
            // alert(project_slug)
            var url = ""
            $.ajax({
                method: 'GET',
                url: '{% url "api:get_chapter_absolute_url" %}',
                data:{
                    'project_slug': project_slug,
                    'chapter_slug': chapter_slug
                },
                async: false,
                success(data){
                    url = data.url
                },error(data){
                    alert('ERROR!')
                }
            })
            return url
        }
    </script>
    <button style="float: right;" onclick="copyCurrentPageURLToClipBoard()" type="button" class="btn btn-primary">Share</button>
    <div style="text-align: center;">
        <img src="/media/{{ project.image }}" alt="{{project.title}}">
    </div>
    <div>
        <h3>What will you do in this course:</h3>
        {{project.description}}
    </div>

    <div>
        <h3>Pre- Requisites for this course?</h3>
        <ul>
            {% for pre_req in project.pre_req.all %}
            <li style="list-style-type: circle">{{pre_req}}</li>
            {% endfor %}
        </ul>
    </div>
    <div>
        <h3>Difficulty Level:</h3>
        {{project.difficulty_level}}
    </div>
    <div>
        <h3>Course Duration</h3>
        {{project.no_of_hours}}
    </div>
    <div>
        <h3>Languages Used:</h3>
        <ul>
            {% if project.languages.all %} {% for language in project.languages.all %}
            <li style="list-style-type: circle">{{language}}</li>
            {% endfor %} {% endif %}
        </ul>
    </div>
    <div>
        <h3>Author Name :</h3> {{project.author.user.first_name }} {{project.author.user.last_name}}
    </div>

    <div class="center">
        <div id="content">
            {{ project.topic_content }}
        </div>
    </div>
    {% if chapters %} {% for chapter in chapters %}
    <div id="blog" class="card hoverable" id="hover">
        <div class="card-action">
            <a href="{% url 'blogs:chapter_post' slug=chapter_heading chapter=chapter.slug %}" id="blogLink">
                {{ chapter.heading }} : {{ chapter.description }}
            </a>
            <button style="float: right;" id="subtopic_chapter_copy" onclick="copyChapterPageURL()" type="button" class="btn btn-primary" data-href="getChapterAbsoluteUrl('{{project.slug}}', '{{chapter.slug}}') ">Share</button>
            <script>
                document.getElementById("subtopic_chapter_copy").setAttribute("data-href",  getChapterAbsoluteUrl('{{project.slug}}', '{{chapter.slug}}') )
            </script>


        </div>

    </div>

    {% endfor %} {% else %}
    <h1>No blogs for the particular url</h1>
    {% endif %}
</div>
{% endblock content %}